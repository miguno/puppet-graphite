### Graphite Web Basic mod_wsgi vhost

# Ensure that Apache listens on port <%= scope.lookupvar('graphite::web::server_port') %>
Listen <%= scope.lookupvar('graphite::web::server_port') %>

# Listen for virtual host requests on all IP addresses
NameVirtualHost *:<%= scope.lookupvar('graphite::web::server_port') %>

<VirtualHost *:<%= scope.lookupvar('graphite::web::server_port') %>>

    ServerName "<%= scope.lookupvar('graphite::web::server_name') %>"
<% if scope.lookupvar('graphite::web::use_hostname_server_alias') -%>
    ServerAlias "<%= scope.lookupvar('::hostname') %>"
<% end -%>
    DocumentRoot "/usr/share/graphite/webapp"
    ErrorLog /var/log/httpd/graphite-web-error.log
    CustomLog /var/log/httpd/graphite-web-access.log common
    Alias /media/ "/usr/lib/python2.6/site-packages/django/contrib/admin/media/"

    WSGIScriptAlias / /usr/share/graphite/graphite-web.wsgi
    WSGIImportScript /usr/share/graphite/graphite-web.wsgi process-group=%{GLOBAL} application-group=%{GLOBAL}

    <Location "/content/">
        SetHandler None
    </Location>

    <Location "/media/">
        SetHandler None
    </Location>

</VirtualHost>

